%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Arsclassica Article
% LaTeX Template
% Version 1.1 (10/6/14)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Lorenzo Pantieri (http://www.lorenzopantieri.net) with extensive modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[
10pt, % Main document font size
a4paper, % Paper type, use 'letterpaper' for US Letter paper
oneside, % One page layout (no page indentation)
%twoside, % Two page layout (page indentation for binding and different headers)
%headinclude,footinclude, % Extra spacing for the header and footer
BCOR5mm, % Binding correction
]{scrartcl}

\input{structure.tex} % Include the structure.tex file which specified the document structure and layout

\usepackage{geometry}
\geometry{margin=1.5in, top=20mm}

\hyphenation{Fortran hy-phen-ation} % Specify custom hyphenation points in words with dashes where you would like hyphenation to occur, or alternatively, don't put any dashes in a word to stop hyphenation altogether

%----------------------------------------------------------------------------------------
%	TITLE AND AUTHOR(S)
%----------------------------------------------------------------------------------------

\title{\normalfont\spacedallcaps{Relazione progetto PCD}} % The article title

\author{\spacedlowsmallcaps{a.a. 13/14 - Enrico Rotundo, 1008052}}

\date{Settembre 2014} % An optional date to appear under the author(s)

%----------------------------------------------------------------------------------------

\begin{document}

%----------------------------------------------------------------------------------------
%	HEADERS
%----------------------------------------------------------------------------------------

\renewcommand{\sectionmark}[1]{\markright{\spacedlowsmallcaps{#1}}} % The header for all pages (oneside) or for even pages (twoside)
%\renewcommand{\subsectionmark}[1]{\markright{\thesubsection~#1}} % Uncomment when using the twoside option - this modifies the header on odd pages
\lehead{\mbox{\llap{\small\thepage\kern1em\color{halfgray} \vline}\color{halfgray}\hspace{0.5em}\rightmark\hfil}} % The header style

\pagestyle{scrheadings} % Enable the headers specified in this block

\sloppy % solve the problem with overfull boxes (e.g. \href over the hbox)

%----------------------------
% CUSTOM COMMAND
%----------------------------

\newcolumntype{C}[1]{>{\Centering}m{#1}} % http://tex.stackexchange.com/questions/15282/tabular-title-above-and-caption-below
\renewcommand\tabularxcolumn[1]{C{#1}}

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTS & LISTS OF FIGURES AND TABLES
%----------------------------------------------------------------------------------------

\maketitle % Print the title/author/date block

%----------------------------------------------------------------------------------------
%	ABSTRACT
%----------------------------------------------------------------------------------------

\begin{abstract}
% \section*{Sommario} % This section will not appear in the table of contents due to the star (\section*)
	
	Il presente documento rappresenta la relazione del progetto per l'esame ``Programazione Concorrente \& Distribuita''. Di seguito verranno illustrate e motivate le scelte progettuali effettuate, in particolare riguardo all'architettura e alla gestione della concorrenza e distribuzione.
\end{abstract}

%----------------------------------------------------------------------------------------
%	Architettura
%----------------------------------------------------------------------------------------

\section{Architettura}
	
	L'architettura implementata adersice al pattern architetturale MVC\footnote{\href{http://en.wikipedia.org/wiki/Model–view–controller}{http://en.wikipedia.org/wiki/Model–view–controller}}, si compone dei seguenti packages:

		\begin{itemize}
			\item controller: contiene le interfaccie e le classi dei controller di Client e Server con relative classi di ``servizio'' come i thread demoni.
			\item model: rappresenta lo stato dell applicazione. Le classi del model rendono disponibili dei metodi che generano i dati da visualizzare nell'interfaccia tramite oggetti di tipo AbstractListModel. Ogni modifica allo stato dei dati notifica l'accaduto alla view.
			\item view: contiene le classi dell'interfaccia grafica di Client e Server. Riceve le notifiche di modifica dal model e aggiorna l'interfaccia.
			\item starter: sono le classi che si occupano di creare gli oggetti Client e Server.
		\end{itemize}

	Tale architettura si ben presta allo sviluppo di applicazioni con interfaccia grafica, inoltre frammenta le responsabilità delle classi opportune consentendo una rapida comprensione del funzionamento del programma.
	 
	\subsection{Classi}
 		
 		\subsubsection{controller.client}
 				
 			L'interfaccia remota è \textbf{controller.client.ClientInterface}.
 			Implementazione dell'interfaccia è invece \textbf{controller.client.ClientInterface}, essa rappresenta un oggetto Client con relativa interfaccia grafica e modello dati. Il costruttore riceve dal \textbf{ClientStarter} il nome del server al quale connettersi, verrà ricercato all'indirizzo \textbf{\href{rmi://localhost/Server/}{rmi://localhost/Server/}}. Il client possiede un \textbf{controller.client.ConnectionChecker} che testa lo stato della connessione al server e aggiorna l'interfaccia in caso di disconnesione. Il client possiede un \textbf{controller.client.DownloadScheduler} che viene avviato ogni volta che viene richiesto il download di una risorsa. Questa classe mantiene una lista dei client possessori della risorsa da scaricare, si occupa di lanciare lo scaricamento delle singole parti con il livello di concorrenza richiesto dalla specifica. Il download di una singola parte viene affidato ad un \textbf{controller.client.PartDownloader}  

 		\subsubsection{controller.server}

 			L'iterfaccia remota del server è \textbf{controller.server.ServerInterface}. L'implementazione dell'interfaccia è \textbf{controller.server.Server}, essa rappresenta un oggetto Server con relativa interfaccia grafica e modello dati. Il costruttore riceve dal \textbf{ServerStarter} il nome che il server deve avere. Il server viene registrato all'indirizzo \textbf{\href{rmi://localhost/Server/nome_server}{rmi://localhost/Server/}} su cui rende pubblicamente disponibili i metodi remoti per la connessione/disonessione client, i metodi remoti chiave: \emph{getResourceOwners(String)} e \emph{getLocalResourceOwners(String)}.
 			Il primo viene invocato in prima battuta dal client C richiedente la risorsa, il server di appartenza S chiama quindi \emph{getLocalResourceOwners(String)} per ottenere le risorse dei client a lui registrati e, per ogni server registrato nella rete S', chiama \emph{getResourceOwners(String)} che risponderà con le risorse dei client resgitrati presso S'. In questo modo viene generato solo al bisogno l'elenco dei client possessori della risorsa richiesta. Questa soluzione è ottimale in quanto efficiente (evita il \emph{polling}\footnote{\href{http://en.wikipedia.org/wiki/Polling_(computer_science)}{http://en.wikipedia.org/wiki/Polling\_(computer\_science)}} che richiederebbe ripetutamente  lock sulle risorse disponibili) e consistente (assicurata dai client con lock sulle risorse disponibili, dai server con lock sulla lista costantemente aggiornata dei client connessi (\textbf{controller.server.ClientChecker})). Ogni oggetto Server gode di una lista di server contattabili mantenuta da \textbf{controller.server.ServerChecker}.

 		\subsubsection{model.client}
 			
 			Il Client avrà un model di tipo \textbf{model.client.ClientResources} che rende disponibili metodi per interfacciarsi alle risorse disponibili ed in download.
 			La classe \textbf{model.share.Resource} rappresenta la singola risorsa che possidono i client.
 			
 		\subsubsection{model.server}

 			Il Server avrà un oggetto di tipo \textbf{model.server.ConnectedClients} e uno di tipo \textbf{model.server.ConnectedServers} che rappresentano, per quel Server, lo stato dei client e server connessi.

 		\subsubsection{view}

 			La classe \textbf{view.AbstractBasicFrame} implementa un area di log sincronizzata. I metodi astratti sono lasciati alle diverse implementazioni tra client (\textbf{view.ClientFrame}) e server (\textbf{view.ServerFrame}) con pannelli e componenti diverse.

%----------------------------------------------------------------------------------------
%	Concorrenza e distribuzione
%----------------------------------------------------------------------------------------

\section{Concorrenza}

	\subsection{Scaricamento risorsa}


\section{Distribuzione}

	\subsection{}

	\subsection{}

\end{document}